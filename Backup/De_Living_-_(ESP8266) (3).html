
   <h2><span style="font-size: 1em;">A Beginner's Guide to ESP8266</span><br>
    </h2>
   <div>
        Some time ago, I wrote <a href="http://www.instructables.com/id/A-Beginners-Guide-to-Arduino/">a Beginner's Guide to Arduino</a>&nbsp;that seems to be very popular, so I decided to create a follow-up: <b>A Beginner's Guide to ESP8266</b>. That's right, a tutorial on how to use the world's most popular $3 Wi-Fi board.
   </div>
   <div>
        <br>
   </div>
   <div>
        This is going to be a very in-depth tutorial, covering some networking concepts as well. If you're a beginner, and just want to go straight to the more exciting Wi-Fi part, feel free to do so, I included short <i>TL;DR's </i>in the longer, more technical parts.
   </div>
   <div>
        <br>
   </div>
   <div>
        A short overview of what I'll cover in this Instructable:&nbsp;
   </div>
   <div>
       <ol>
           <li><b>What is an ESP8266?</b>&nbsp;A short overview of what an ESP8266 is, and what you can do with it</li>
           <li><b>Deciding on what board to buy</b>: There's loads of different ESP8266 available these days, finding the one that's best for you can be hard</li>
           <li><b>Installing the software</b>: you need to install some software to program the ESP8266, and maybe a USB driver</li>
           <li><b>Setting up the hardware</b>: some modules and boards need some external components</li>
           <li><b>The ESP8266 as a microcontroller</b>: the ESP8266 can be used as a normal microcontroller, just like an Arduino</li>
           <li><b>Network protocols</b>: Before we start using the Wi-Fi capabilities of the ESP8266, I'll teach you some of the network protocols involved</li>
           <li><b>Setting up a Wi-Fi connection</b>: That's probably why you're reading this, right?</li>
           <li><b>Name resolution</b>: Find the ESP8266 on your local network using mDNS</li>
           <li><b>Setting up a simple web server</b>: This enables you to add web pages to the ESP8266, and browse them from your computer or phone</li>
           <li><b>Setting up an advanced web server</b>: a more advanced server with a real file system that allows you to upload new files over Wi-Fi</li>
           <li><b>OTA - aka uploading programs over Wi-Fi</b>: You don't have to upload programs over USB, you can use Wi-Fi instead</li>
           <li><b>Wirelessly controlling your RGB lighting</b>: Change the color of your LED strips using your phone or computer</li>
           <li><b>Getting the time</b>: Connect to a time server using NTP and sync the ESP's clock</li>
           <li><b>Monitoring sensors</b>: log the temperature in your living room, save it in flash memory and show it in a fancy graph in your browser</li>
           <li><b>Getting email notifications</b>: Turn on a notification light when you've got unread emails</li>
           <li><b>Advanced features</b>: use DNS, captive portals, Wi-Fi connector libraries, OSC ...</li>
       </ol>
   </div>
   <div>
        <br>
   </div>
   <div>
        This Instructable expects some basic knowledge of microcontrollers like the Arduino. If that's something you're not already familiar with, I'd recommend you to read my <a href="https://www.instructables.com/id/A-Beginners-Guide-to-Arduino/">Beginner's Guide to Arduino</a> first, it covers a lot of the basics that I won't go into in this article.
   </div>
   <div>
        I really want to focus on the ESP8266-specific things, like Wi-Fi and other network protocols, the ESP's hardware, software, IoT, etc ...
   </div>
   <h3>What is an ESP8266?</h3>
   <div>
        The ESP8266 is a System on a Chip (SoC), manufactured by the Chinese company <a href="https://espressif.com/en/">Espressif</a>. It consists of a Tensilica L106 32-bit <b>micro controller</b> unit (MCU) and a <b>Wi-Fi transceiver</b>. It has <b>11 GPIO pins</b>* (General Purpose Input/Output pins), and an <b>analog input</b> as well. This means that you can program it like any normal Arduino or other microcontroller. And on top of that, you get Wi-Fi communication, so you can use it to connect to your Wi-Fi network, connect to the Internet, host a web server with real web pages, let your smartphone connect to it, etc ... The possibilities are endless! It's no wonder that this chip has become the most popular IOT device available.&nbsp;
   </div>
   <div>
        <br>
   </div>
   <div>
        There are many different modules available, standalone modules like the <a href="http://en.ai-thinker.com/html/Products/WIFI_Module/ESP_01-14Series/">ESP-## series</a> by AI Thinker, or complete development boards like the <a href="http://nodemcu.com/index_en.html">NodeMCU DevKit</a>&nbsp;or the&nbsp;<a href="http://www.wemos.cc/">WeMos D1</a>. Different boards may have different pins broken out, have different Wi-Fi antennas, or a different amount of flash memory on board.
   </div>
   <div>
        <span style="color: #d7001d;"><br>
        </span>
   </div>
   <div>
        <span style="font-size: 13.3333px;">(*) The ESP8266 chip itself has 17 GPIO pins, but 6 of these pins (6-11) are used for communication with the on-board flash memory chip.</span>
   </div>
   <h3>Programming</h3>
   <div>
        There are different ways to program the ESP8266, but I'll only cover the method using the Arduino IDE. This is really easy for beginners, and it's a very familiar environment if you've used Arduino boards before.&nbsp;
   </div>
   <div>
        Just keep in mind that it's not limited to this option: there's also an official SDK available to program it in real C, this is very useful if you want to optimize your code or do some advanced tricks that aren't supported by the Arduino IDE. Another possibility is to flash it with a <a href="https://github.com/nodemcu/nodemcu-firmware">LUA</a> interpreter, so you can upload and run LUA scripts. Or maybe you're more familiar with Python? Then you should check out the <a href="http://micropython.org/download#esp8266">MicroPython firmware</a> to interpret MicroPython scripts. I'm sure there's other languages available as well, so just do a quick Google search and write your code in the language of your choice.
   </div>
   <h3>Requirements</h3>
   <div>
        You'll need a couple of things in order to follow this guide:
   </div>
   <div>
       <ul>
           <li>An ESP8266 board</li>
           <li>A computer that can run the Arduino IDE (Windows, Mac or Linux)</li>
           <li>A USB-to-Serial converter, it is very important that you use a <b>3.3V</b>&nbsp;model*</li>
           <li>A USB cable</li>
           <li>A 3.3V power supply or voltage regulator*</li>
           <li>A Wi-Fi network to connect to</li>
       </ul>
       <div>
            <small>(*) Your board may already include these. More information can be found further down the page.</small>
       </div>
       <h3>Before you begin ...</h3>
       <div>
            There's a few things you have to look out for when using an ESP8266: The most important thing is that it runs at 3.3V, so if you connect it to a 5V power supply, you'll kill it. Unlike some 3.3V Arduino or Teensy boards, <b>the ESP8266's I/O pins are not 5V tolerant</b>, so if you use a 5V USB-to-Serial converter, or 5V sensors etc. you'll blow it up.&nbsp;
       </div>
       <div>
            A second thing to keep in mind is that the ESP8266 can only source or sink <b>12mA per output pin</b>, compared to 20-40mA for most Arduinos.
       </div>
       <div>
            The ESP8266 has one <b>analog to digital converter</b>, but it has a strange voltage range:<b> 0 - 1V</b>, voltages above 1V might damage the board.
       </div>
       <div>
            <br>
       </div>
       <div>
            One last thing to keep in mind is that the ESP8266 has to share the system resources and CPU time between your sketch and the Wi-Fi driver. Also, features like PWM, interrupts or IÂ²C are emulated in software, most Arduinos on the other hand, have dedicated hardware parts for these tasks.
       </div>
       <div>
            For most applications however, this is not too much of an issue.
       </div>
       <div>
            <br>
       </div>
       <h2>Deciding on what board to buy</h2>
       <div>
            ESP8266 is just the name of the chip, many companies have designed their own boards that use this chip, so t<span style="font-size: 1em;">here are many different ESP8266 boards on the market.</span><span style="font-size: 1em;">&nbsp;If you don't know the difference between all these different models, you might have a hard time deciding on what board to buy.</span>
       </div>
       <div>
           <div>
                <br>
           </div>
           <div>
                The easiest (and fastest) way to get an ESP8266 board is to buy one from a well-known electronics shop like Adafruit or SparkFun, but if you want it cheap, you should check out Ebay or other sites where you can order them directly from China.
           </div>
       </div>
       <h3>Development boards</h3>
       <div>
            Some boards have all kinds of features on-board to help developing ESP8266 hardware and software: for example, a USB to Serial converter for programming, a 3.3V regulator for power, on-board LEDs for debugging, a voltage divider to scale the analog input ...
       </div>
       <div>
            If you're a beginner, I would definitely recommend a development board. It's easier to get started if you don't have to worry about all these things.<br>
       </div>
   </div>
   <h3>Bare-bones AI Thinker boards</h3>
   <div>
        If you want to add an ESP8266 to a small project, or if you want a cheaper* board, you might want to buy a board that doesn't have these features. In that case, you can buy one of the many ESP-## modules developed by AI Thinker. They contain just the ESP8266 and the necessary components to run it.&nbsp;
   </div>
   <div>
        To program the board, you'll need an external USB-to-Serial converter.
   </div>
   <div>
        With some modules, you get an on-board antenna (PCB or ceramic) and an LED, some boards have just an antenna connector, or no LEDs at all. They also differ in physical size, and flash memory size. An important thing to notice, is that some boards do not break out&nbsp;all GPIO pins. For example, the ESP-01 only has 2 I/O pins available (apart from the TX and RX pins), while other modules like the ESP-07 or ESP-12 break out all available I/O pins.
   </div>
   <div>
        <br>
   </div>
   <div>
        <small>(*) The board itself is cheaper, but you'll have to spend more on external parts.</small>
   </div>
   <h3>Overview</h3>
   <div>
        Here's a table with some of the most popular ESP8266 development boards and their features:
   </div>
   <div>
        <br>
   </div>
   <table>
       <tbody>
           <tr>
               <th align="left" style="height: 17px;">Board </th>
               <th align="left">GPIO </th>
               <th align="left">3.3V Vreg </th>
               <th align="left">USB-to-Serial </th>
               <th align="left">Auto-Reset </th>
               <th align="left">Auto-Program </th>
               <th align="left">Flash </th>
               <th align="left">ADC range </th>
               <th align="left">Extra </th>
           </tr>
           <tr>
               <td align="left" style="height: 17px;">SparkFun ESP8266 Thing</td>
               <td align="left">11</td>
               <td align="left">+</td>
               <td align="left">-</td>
               <td align="left">+</td>
               <td align="left">Â±*</td>
               <td align="left">512KB (4Mb)</td>
               <td align="left">0-1V</td>
               <td align="left">Battery charger, crypto element, temperature sensor, light sensor</td>
           </tr>
           <tr>
               <td align="left" style="height: 17px;">SparkFun ESP8266 Thing - Dev Board</td>
               <td align="left">11</td>
               <td align="left">+</td>
               <td align="left">+</td>
               <td align="left">+</td>
               <td align="left">+</td>
               <td align="left">512KB (4Mb)</td>
               <td align="left">0-1V</td>
               <td align="left"><br>
                </td>
           </tr>
           <tr>
               <td align="left" style="height: 17px;">Node MCU</td>
               <td align="left">11</td>
               <td align="left">+</td>
               <td align="left">+</td>
               <td align="left">+</td>
               <td align="left">+</td>
               <td align="left">4MB (32Mb)</td>
               <td align="left">0-3.3V</td>
               <td align="left"><br>
                </td>
           </tr>
           <tr>
               <td align="left" style="height: 17px;">Adafruit Feather HUZZAH with ESP8266</td>
               <td align="left">11</td>
               <td align="left">+</td>
               <td align="left">+</td>
               <td align="left">+</td>
               <td align="left">+</td>
               <td align="left">4MB (32Mb)</td>
               <td align="left">0-1V</td>
               <td align="left">Battery charger</td>
           </tr>
           <tr>
               <td align="left" style="height: 17px;">Adafruit HUZZAH ESP8266 Breakout</td>
               <td align="left">11</td>
               <td align="left">+</td>
               <td align="left">-</td>
               <td align="left">-</td>
               <td align="left">-</td>
               <td align="left">4MB (32Mb)</td>
               <td align="left">0-1V</td>
               <td align="left">5V-tolerant RX and Reset pins</td>
           </tr>
           <tr>
               <td align="left" style="height: 17px;">ESP-##</td>
               <td align="left">4 - 11</td>
               <td align="left">-</td>
               <td align="left">-</td>
               <td align="left">-</td>
               <td align="left">-</td>
               <td align="left">512KB (4Mb) â 4MB (32Mb)</td>
               <td align="left">0-1V</td>
               <td align="left">Small and cheap</td>
           </tr>
       </tbody>
   </table>
   <div>
        You can find the full list of ESP-## modules <a href="http://www.esp8266.com/wiki/doku.php?id=esp8266-module-family">here</a>.
   </div>
   <div>
        <br>
   </div>
   <div>
        As you can see, both the Node MCU and the Adafruit Feather HUZZAH are solid choices.
   </div>
   <div>
        <br>
   </div>
   <div>
        <small>(*) When auto-program on the SparkFun ESP8266 Thing is enabled, you can't use the Serial Monitor.</small>
   </div>
   <p><br>
    </p>
   <h2>Installation of the required software</h2>
   <div>
        The first step is to download and install the Arduino IDE. I explained this in <a href="https://www.instructables.com/id/A-Beginners-Guide-to-Arduino/step3/Software/">A Beginner's Guide to Arduino</a>. (As of February 7th 2017, the latest stable version of the IDE is 1.8.1.)
   </div>
   <div>
        <br>
   </div>
   <div>
        To program the ESP8266, you'll need a plugin for the Arduino IDE, it can be downloaded from <a href="https://github.com/esp8266/Arduino">GitHub</a>&nbsp;<span style="font-size: 1em;">manually</span><span style="font-size: 1em;">, but it is easier to just add the URL in the Arduino IDE:</span>
   </div>
   <div>
       <ol>
           <li>Open the Arduino IDE.</li>
           <li>Go to File &gt; Preferences.</li>
           <li>Paste the URL <a href="http://arduino.esp8266.com/stable/package_esp8266com_index.json">http://arduino.esp8266.com/stable/package_esp8266com_index.json</a>&nbsp;into the <i>Additional Board Manager URLs </i>field.<br>
            (You can add multiple URLs, separating them with commas.)</li>
           <li>Go to Tools &gt; Board &gt; Board Manager and search for 'esp8266'. Select the newest version, and click install. (As of February 7th 2017, the latest stable version is 2.3.0.)</li>
       </ol>
       <div>
            You can check out the official install guide <a href="https://github.com/esp8266/Arduino/blob/master/doc/installing.md">here</a>.
       </div>
       <h3>Drivers</h3>
       <div>
            If you are using a board with the CH340(G) USB-to-Serial chip, like the NodeMCU, you'll probably have to install the USB drivers for it.
       </div>
       <div>
            They can be found on <a href="https://github.com/nodemcu/nodemcu-devkit/tree/master/Drivers">GitHub</a>.&nbsp;
       </div>
       <div>
            If you are using a board with the&nbsp;CP2104&nbsp;<span style="font-size: 1em;">USB-to-Serial chip, like the Adafruit Feather HUZZAH board, you'll probably have to install USB drivers as well. You can find them on the <a href="http://www.silabs.com/products/mcu/pages/usbtouartbridgevcpdrivers.aspx">Silicon Labs website</a>.</span>
       </div>
       <div>
            <span style="font-size: 1em;">Boards with an FTDI chip should work right out of the box, without the need of installing any drivers.</span>
       </div>
       <h2><span style="font-size: 1em;">Getting the hardware ready</span></h2>
       <div>
            <span style="font-size: 1em;">There are two main categories of ESP8266 boards: development boards with a USB interface (USB-to-Serial convertor) on-board, and boards without a USB connection.</span>
       </div>
       <h3>Development boards with a USB interface</h3>
       <div>
            For example: NodeMCU,&nbsp;SparkFun ESP8266 Thing - Dev Board, SparkFun Blynk Board, Adafruit Feather HUZZAH&nbsp;with ESP8266 Wi-Fi ...
       </div>
       <div>
            <br>
       </div>
       <div>
            These boards will show up in Device manager (Windows) or in lsusb (Linux) as soon as you plug them in.
       </div>
       <div>
            They have a 3.3V regulator on-board, and can be programmed over USB directly, so you don't need any external components to get it working.
       </div>
       <div>
            The only thing you may need to do, is solder on some headers.
       </div>
       <h3>Bare-bones boards and boards without a USB interface</h3>
       <p>This category has 2 sub-categories: boards with a 3.3V regulator on-board, and boards with just the ESP8266 and a flash memory chip, without 3.3V regulator. If your board doesn't have a 5V to 3.3V regulator, buy one separately. You could use an <a href="http://cds.linear.com/docs/en/datasheet/1117fd.pdf">LM1117-3.3</a> for example. The on-board 3.3V regulator of most Arduino boards is not powerful enough to power the ESP.</p>
       <p>To program the board, you'll need a USB-to-Serial converter. The FTDI FT232RL is quite popular, because it can switch between 5V and 3.3V. <b>It is essential that the USB-to-Serial converter you buy operates at 3.3V. If you buy a 5V model, you will damage the ESP8266.</b></p>
       <h4>Connecting the USB-to-Serial converter</h4>
       <ol>
           <li>Connect the ground (GND) of the USB-to-Serial converter to the ground of the ESP8266.<br>
            </li>
           <li>Connect the RX-pin of the&nbsp;USB-to-Serial converter to the TXD pin of the ESP8266. (On some boards, it's labelled TX instead of TXD, but it's the same pin.)</li>
           <li><span style="font-size: 1em;">Connect the TX-pin of the&nbsp;USB-to-Serial converter to the RXD pin of the ESP8266.&nbsp;(On some boards, it's labelled RX instead of RXD, but it's the same pin.)</span></li>
           <li><span style="font-size: 1em;">If your ESP8266 board has a DTR pin, connect it to the DTR pin of the USB-to-Serial converter. This enables auto-reset when uploading a sketch, more on that later.</span><br>
            </li>
       </ol>
   </div>
   <h4>Enabling the chip</h4>
   <div>
        If you're using a bare-bone ESP-## board by AI Thinker, you have to add some resistors to turn on the ESP8266, and to select the right boot mode.&nbsp;
   </div>
   <div>
       <ol>
           <li>Enable the chip by connecting the CH_PD (Chip Power Down, sometimes labeled CH_EN or chip enable) pin to V<sub>CC&nbsp;</sub>through a 10KÎ© resistor.</li>
           <li>Disable SD-card boot by connecting GPIO15 to ground through a 10KÎ© resistor.</li>
           <li>Select normal boot mode by connecting GPIO0 to V<sub>CC </sub>through a 10KÎ© resistor.</li>
           <li>Prevent random resets by connecting the RST (reset) pin to V<sub>CC </sub>through a 10KÎ© resistor.</li>
           <li>Make sure you don't have anything connected to GPIO2 (more information in the next chapter).<br>
            </li>
       </ol>
       <h4>Adding reset and program buttons</h4>
   </div>
   <div>
        If your ESP8266 board doesn't have a reset button, you could add one by connecting a push button to between the RST pin and ground.
   </div>
   <div>
        <br>
   </div>
   <div>
        To put the chip into programming mode, you have to pull GPIO0 low during startup. That's why we also need a program button. Because it's possible to use GPIO0 as an output, we can't directly short it to ground, that could damage the chip. To prevent this, connect 470Î© resistor in series with the switch. It's important that this resistance is low enough, otherwise, it will be pulled high by the 10KÎ© resistor we added in the previous paragraph.
   </div>
   <h4>Connecting the power supply</h4>
   <div>
        If the ESP8266 module you have doesn't have a 3.3V voltage regulator on board, you have to add one externally.&nbsp;<span style="font-size: 1em;">You could use an</span><span style="font-size: 1em;">&nbsp;</span><a href="http://cds.linear.com/docs/en/datasheet/1117fd.pdf" style="font-size: 1em;">LM1117-3.3</a><span style="font-size: 1em;">&nbsp;</span><span style="font-size: 1em;">for example.</span>
   </div>
   <div>
       <ol>
           <li>Connect the first pin of the regulator to ground.</li>
           <li>Place a 10ÂµF capacitor between pin 2 (V<sub>out</sub>) and ground. Watch the polarity!</li>
           <li>Place a 10ÂµF capacitor between pin 3 (V<sub>in</sub>) and ground.</li>
           <li>Connect pin 2 to the 3.3V or V<sub><span style="font-size: 13.3333px;">CC </span></sub>of the ESP8266.</li>
           <li>Connect pin 3 to a 5V power source, a USB port, for example.</li>
       </ol>
   </div>
   <div>
        <br>
   </div>
    <a href="/photo.php?id=716" title="VReg.png"><img src="/photo.php?id=716&amp;thumb=1" alt="VReg.png"></a><a href="/photo.php?id=731" title="ESP8266-2.png"><img src="/photo.php?id=731&amp;thumb=1" alt="ESP8266-2.png"></a>